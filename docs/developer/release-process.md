# EchoLab å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† EchoLab é¡¹ç›®çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒæµç¨‹ã€‚

## ç‰ˆæœ¬ç±»å‹è¯´æ˜

æˆ‘ä»¬çš„é¡¹ç›®æ”¯æŒä»¥ä¸‹ç‰ˆæœ¬ç±»å‹ï¼š

### ğŸš§ Dev (å¼€å‘ç‰ˆ)

- **æ ¼å¼**: `1.0.0-dev.1`
- **ç”¨é€”**: å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ„å»º
- **ç‰¹ç‚¹**:
  - è·³è¿‡æµ‹è¯•å’Œç±»å‹æ£€æŸ¥ä»¥åŠ å¿«æ„å»ºé€Ÿåº¦
  - æ„å»ºäº§ç‰©ä¿ç•™ 7 å¤©
  - å‘å¸ƒä¸ºè‰ç¨¿çŠ¶æ€
  - ä¸Šä¼ åˆ° `/test-releases/` è·¯å¾„

### ğŸ”§ Test (æµ‹è¯•ç‰ˆ)

- **æ ¼å¼**: `1.0.0-test.1`
- **ç”¨é€”**: å†…éƒ¨æµ‹è¯•ä¸“ç”¨ç‰ˆæœ¬
- **ç‰¹ç‚¹**:
  - æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•å’Œç±»å‹æ£€æŸ¥
  - æ„å»ºäº§ç‰©ä¿ç•™ 7 å¤©
  - å‘å¸ƒä¸ºè‰ç¨¿çŠ¶æ€
  - ä¸Šä¼ åˆ° `/test-releases/` è·¯å¾„

### âš ï¸ Alpha (å†…æµ‹ç‰ˆ)

- **æ ¼å¼**: `1.0.0-alpha.1`
- **ç”¨é€”**: æ—©æœŸé¢„è§ˆç‰ˆæœ¬ï¼ŒåŠŸèƒ½ä¸å®Œæ•´
- **ç‰¹ç‚¹**:
  - æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•å’Œç±»å‹æ£€æŸ¥
  - æ„å»ºäº§ç‰©ä¿ç•™ 7 å¤©
  - æ ‡è®°ä¸ºé¢„å‘å¸ƒç‰ˆæœ¬
  - ä¸Šä¼ åˆ° `/prerelease/` è·¯å¾„

### ğŸ§ª Beta (å…¬æµ‹ç‰ˆ)

- **æ ¼å¼**: `1.0.0-beta.1`
- **ç”¨é€”**: åŠŸèƒ½åŸºæœ¬å®Œæ•´çš„æµ‹è¯•ç‰ˆæœ¬
- **ç‰¹ç‚¹**:
  - æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•å’Œç±»å‹æ£€æŸ¥
  - æ„å»ºäº§ç‰©ä¿ç•™ 7 å¤©
  - æ ‡è®°ä¸ºé¢„å‘å¸ƒç‰ˆæœ¬
  - ä¸Šä¼ åˆ° `/prerelease/` è·¯å¾„
  - æ”¯æŒè‡ªåŠ¨æ›´æ–°

### ğŸ‰ Stable (æ­£å¼ç‰ˆ)

- **æ ¼å¼**: `1.0.0`
- **ç”¨é€”**: ç”Ÿäº§ç¯å¢ƒå¯ç”¨çš„ç¨³å®šç‰ˆæœ¬
- **ç‰¹ç‚¹**:
  - æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•ã€ç±»å‹æ£€æŸ¥å’Œä»£ç æ£€æŸ¥
  - æ„å»ºäº§ç‰©ä¿ç•™ 30 å¤©
  - æ­£å¼å‘å¸ƒç‰ˆæœ¬
  - ä¸Šä¼ åˆ° `/releases/` è·¯å¾„
  - æ”¯æŒè‡ªåŠ¨æ›´æ–°

## ç‰ˆæœ¬ç®¡ç†

### ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†è„šæœ¬

æˆ‘ä»¬æä¾›äº†ä¾¿æ·çš„ç‰ˆæœ¬ç®¡ç†è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ï¼š

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯
pnpm version:current

# è®¾ç½®ç‰¹å®šç‰ˆæœ¬
pnpm version:set 1.0.0-beta.1

# é€’å¢ç‰ˆæœ¬å·
pnpm version:major        # 1.0.0 -> 2.0.0
pnpm version:minor        # 1.0.0 -> 1.1.0
pnpm version:patch        # 1.0.0 -> 1.0.1

# åˆ›å»ºé¢„å‘å¸ƒç‰ˆæœ¬
pnpm version:beta         # 1.0.0 -> 1.1.0-beta.1
pnpm version:beta-patch   # 1.0.0 -> 1.0.1-beta.1

# é€’å¢é¢„å‘å¸ƒç‰ˆæœ¬å·
pnpm version:prerelease   # 1.0.0-beta.1 -> 1.0.0-beta.2
```

### æ‰‹åŠ¨ç‰ˆæœ¬ç®¡ç†

ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†è„šæœ¬ï¼š

```bash
# æŸ¥çœ‹å¸®åŠ©
tsx scripts/version-manager.ts

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
tsx scripts/version-manager.ts current

# è®¾ç½®ç‰ˆæœ¬
tsx scripts/version-manager.ts set 1.0.0-beta.1

# é€’å¢ç‰ˆæœ¬ï¼ˆæ”¯æŒæŒ‡å®šç±»å‹ï¼‰
tsx scripts/version-manager.ts minor beta
tsx scripts/version-manager.ts patch alpha
tsx scripts/version-manager.ts major stable

# é€’å¢é¢„å‘å¸ƒç‰ˆæœ¬
tsx scripts/version-manager.ts prerelease
```

## å‘å¸ƒæµç¨‹

### è‡ªåŠ¨å‘å¸ƒï¼ˆæ¨èï¼‰

1. **æ›´æ–°ç‰ˆæœ¬å·**

   ```bash
   # å‘å¸ƒ beta ç‰ˆæœ¬
   pnpm version:beta

   # æˆ–è€…é€’å¢ç°æœ‰ beta ç‰ˆæœ¬
   pnpm version:prerelease
   ```

2. **æäº¤å¹¶æ¨é€æ ‡ç­¾**

   ```bash
   git add package.json
   git commit -m "chore: bump version to v1.0.0-beta.1"
   git tag v1.0.0-beta.1
   git push origin main --tags
   ```

3. **GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ**
   - æ¨é€æ ‡ç­¾åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨è§¦å‘æ„å»º
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬ç±»å‹å¹¶åº”ç”¨ç›¸åº”çš„æ„å»ºç­–ç•¥
   - æ„å»ºå®Œæˆåä¼šè‡ªåŠ¨ä¸Šä¼ åˆ°è…¾è®¯äº‘ COS å¹¶åˆ›å»º GitHub Release

### æ‰‹åŠ¨è§¦å‘å‘å¸ƒ

ä½ ä¹Ÿå¯ä»¥åœ¨ GitHub Actions é¡µé¢æ‰‹åŠ¨è§¦å‘å‘å¸ƒï¼š

1. è®¿é—®é¡¹ç›®çš„ Actions é¡µé¢
2. é€‰æ‹© "Build and Release" workflow
3. ç‚¹å‡» "Run workflow"
4. å¡«å†™å‚æ•°ï¼š
   - **version**: ç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ä½¿ç”¨ package.json ä¸­çš„ç‰ˆæœ¬ï¼‰
   - **force_version_type**: å¼ºåˆ¶æŒ‡å®šç‰ˆæœ¬ç±»å‹ï¼ˆå¯é€‰ï¼‰
   - **skip_tests**: æ˜¯å¦è·³è¿‡æµ‹è¯•ï¼ˆä»…ç”¨äºå¿«é€Ÿæ„å»ºï¼‰

## å‘å¸ƒè·¯å¾„è¯´æ˜

ä¸åŒç‰ˆæœ¬ç±»å‹çš„æ–‡ä»¶ä¼šä¸Šä¼ åˆ°ä¸åŒçš„è·¯å¾„ï¼š

- **Dev/Test**: `/test-releases/{version}/`
- **Alpha/Beta**: `/prerelease/{version}/`
- **Stable**: `/releases/{version}/`

è‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶è·¯å¾„ï¼š

- **Dev/Test**: `/test-autoupdate/`
- **Alpha/Beta**: `/prerelease-autoupdate/`
- **Stable**: `/autoupdate/`

## æœ€ä½³å®è·µ

### Beta ç‰ˆæœ¬å‘å¸ƒæµç¨‹

1. **å¼€å‘å®Œæˆååˆ›å»º beta ç‰ˆæœ¬**

   ```bash
   pnpm version:beta
   ```

2. **æäº¤å¹¶æ¨é€**

   ```bash
   git add package.json
   git commit -m "chore: release v1.0.0-beta.1"
   git tag v1.0.0-beta.1
   git push origin main --tags
   ```

3. **æµ‹è¯• beta ç‰ˆæœ¬**

   - ç­‰å¾…è‡ªåŠ¨æ„å»ºå®Œæˆ
   - ä¸‹è½½å¹¶æµ‹è¯• beta ç‰ˆæœ¬
   - æ”¶é›†ç”¨æˆ·åé¦ˆ

4. **ä¿®å¤é—®é¢˜å¹¶å‘å¸ƒæ–°çš„ beta ç‰ˆæœ¬**

   ```bash
   # ä¿®å¤é—®é¢˜å
   pnpm version:prerelease  # v1.0.0-beta.1 -> v1.0.0-beta.2
   git add package.json
   git commit -m "chore: release v1.0.0-beta.2"
   git tag v1.0.0-beta.2
   git push origin main --tags
   ```

5. **å‘å¸ƒæ­£å¼ç‰ˆæœ¬**
   ```bash
   # beta æµ‹è¯•å®Œæˆå
   pnpm version:set 1.0.0  # ç§»é™¤ beta æ ‡è¯†
   git add package.json
   git commit -m "chore: release v1.0.0"
   git tag v1.0.0
   git push origin main --tags
   ```

### ç‰ˆæœ¬å·è§„èŒƒ

- **ä¸»ç‰ˆæœ¬å· (Major)**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å· (Minor)**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å· (Patch)**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£
- **é¢„å‘å¸ƒæ ‡è¯†**: `alpha.1`, `beta.1`, `dev.1`, `test.1`

### æ³¨æ„äº‹é¡¹

1. **æ ‡ç­¾æ ¼å¼**: å¿…é¡»ä»¥ `v` å¼€å¤´ï¼Œå¦‚ `v1.0.0-beta.1`
2. **ç‰ˆæœ¬ä¸€è‡´æ€§**: ç¡®ä¿ package.json ä¸­çš„ç‰ˆæœ¬ä¸ Git æ ‡ç­¾ä¸€è‡´
3. **æµ‹è¯•è¦†ç›–**: æ­£å¼ç‰ˆæœ¬å‘å¸ƒå‰å¿…é¡»é€šè¿‡å®Œæ•´çš„æµ‹è¯•æµç¨‹
4. **æ–‡æ¡£æ›´æ–°**: é‡è¦ç‰ˆæœ¬å‘å¸ƒæ—¶è®°å¾—æ›´æ–°ç›¸å…³æ–‡æ¡£

## æ•…éšœæ’é™¤

### æ„å»ºå¤±è´¥

1. æ£€æŸ¥ç‰ˆæœ¬å·æ ¼å¼æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤æ‰€æœ‰æµ‹è¯•éƒ½èƒ½é€šè¿‡
3. æ£€æŸ¥ GitHub Actions æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯

### ä¸Šä¼ å¤±è´¥

1. æ£€æŸ¥è…¾è®¯äº‘ COS é…ç½®æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ GitHub Secrets ä¸­çš„å¯†é’¥æ˜¯å¦æœ‰æ•ˆ
3. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæƒé™è®¾ç½®

### ç‰ˆæœ¬æ£€æµ‹é”™è¯¯

1. ç¡®è®¤ package.json ä¸­çš„ç‰ˆæœ¬æ ¼å¼æ­£ç¡®
2. æ£€æŸ¥æ˜¯å¦æœ‰ç‰¹æ®Šå­—ç¬¦æˆ–æ ¼å¼é—®é¢˜
3. ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†è„šæœ¬è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†
